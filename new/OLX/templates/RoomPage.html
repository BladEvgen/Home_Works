{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat with {{ room.name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<div>
    <div class="p-10 lg:p-20 text-center">
        <h1 class="text-3xl lg:text-6xl text-dark">{{ room.name }}</h1>
    </div>

    <div class="lg:w-2/4 mx-4 lg:mx-auto p-4 bg-white rounded-xl shadow-md">
        <div class="chat-messages space-y-3" id="chat-messages">
            {% for message in messages %}
                {% if message.user == request.user %}
                    <div class="flex justify-end mb-2">
                        <div class="bg-sky-500 text-black p-4 rounded-xl">
                            <p class="font-semibold">{{ message.user.username }}</p>
                            <p>{{ message.content }}</p>
                        </div>
                    </div>
                {% else %}
                    <div class="flex mb-2">
                        <div class="bg-gray-200 text-black p-4 rounded-xl">
                            <p class="font-semibold">{{ message.user.username }}</p>
                            <p>{{ message.content }}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="lg:w-2/4 mt-6 mx-4 lg:mx-auto p-4 bg-white rounded-xl shadow-md">
        <form class="flex">
            {% csrf_token %}
            <input type="text" name="content" class="flex-1 mr-3 p-3 border rounded-xl" placeholder="Ваше сообщение..." id="chat-message-input"/>
            <button class="px-5 py-3 rounded-xl text-white bg-teal-600 hover:bg-teal-700" id="chat-message-submit">Ok</button>
        </form>
    </div>
</div>


{{room.slug|json_script:"json-roomname" }}
{{request.user.username|json_script:"json-username"}}
{{ room.token|json_script:"json-token" }}


    <script src="{% static 'js/chat.js' %}"></script>

</body>
</html>

